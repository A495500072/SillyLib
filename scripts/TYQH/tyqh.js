/**
 作者：临渊
 Modified by treasunew
 Tgchannel:https://t.me/PorterTree
 日期：8-11
 小程序：统一快乐星球
 入口：活动->种番茄
 功能：除了助力都能完成
 抓包：api.xiaoyisz.com/qiehuang/ga/public/api/login  这个登录包里 body 部分的 全部
 变量：tybody='body@xxxx '  多个账号用 @ 或者 换行 分割 
 定时一天三次，八个小时一次收取冒险奖励
 cron: 10 12,18 * * *

 [task_local]
 #统一茄皇
 10 12,18 * * *  https://raw.githubusercontent.com/treasunew/SillyLib/main/scripts/TYQH/tyqh.js, tag=统一茄皇, enabled=true
 [rewrite_local]
 http://api.xiaoyisz.com/qiehuang/ga/public/api/login url script-request-header https://raw.githubusercontent.com/treasunew/SillyLib/main/scripts/TYQH/tyqh.js
 [MITM]
 hostname = api.xiaoyisz.com

 6-14 更新了AU获取方式，理论上不会过期了
 6-18 更新了收取植物、种新的植物和推送加上昵称，方便辨认（可能）
 6-22 修复了上报挑战失败、洒阳光失败，更新了种植进度（免得老有人说脚本坏了）
 6-24 优化日志，更新了随机UA，可以自己抓 user-agent 填到变量 UA 里面，也可以不填直接改脚本里 uaNum 的数字
 6-26 移除了开始冒险，加到助力脚本，现在四个号可以两个小时冒险一次
 6-28 新增偷取好友阳光（出自jujuju大佬）
 8-11 修复了参数校验的问题，sign 
 */

const $ = new Env("统一茄皇");
const crypto = require('crypto-js');
const notify = $.isNode() ? require("./sendNotify") : "";
const { log } = console;
const Notify = 1; //0为关闭通知，1为打开通知,默认为1
const debug = 0; //0为关闭调试，1为打开调试,默认为0
const uaNum = 1; //随机UA，从0-20随便选一个填上去
//////////////////////
let scriptVersion = "1.6.2";
let scriptVersionLatest = '';
let tyau = "";
let tybody = ($.isNode() ? process.env.tybody : $.getdata("tybody")) || "";
let UA = ($.isNode() ? process.env.UA : $.getdata("UA")) || "";
let UAArr = [];
let tybodyArr = [];
let newAuArr = [];
let tyPlantId = "";
let plantIdArr = [];
let auback = 0;
let data = "";
let msg = "";
let taskType = 0;
let taskBack = [];
let taskTypeArr = [];
let taskId = "";
let taskIdArr = [];
let challengeId = "";
let adventureId = "";
let adventureBack = 0;
let name = "";
let id = "";
let idArr = [];
let progress = 0.0;
let plantStage = 0;
let plantStatus = "";
let helpTaskId = "";
let helpTaskIdArr = [];
let giveSunshineBack = 0;
let stealFull = false;

const User_Agents=['Mozilla/5.0\x20(Linux;\x20Android\x2010;\x20ONEPLUS\x20A5010\x20Build/QKQ1.191014.012;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/77.0.3865.120\x20MQQBrowser/6.2\x20TBS/045230\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148','Mozilla/5.0\x20(Linux;\x20Android\x209;\x20Mi\x20Note\x203\x20Build/PKQ1.181007.001;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/66.0.3359.126\x20MQQBrowser/6.2\x20TBS/045131\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x2010;\x20GM1910\x20Build/QKQ1.190716.003;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/77.0.3865.120\x20MQQBrowser/6.2\x20TBS/045230\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x209;\x2016T\x20Build/PKQ1.190616.001;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/66.0.3359.126\x20MQQBrowser/6.2\x20TBS/044942\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_6\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_5\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2014_2\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/532.0\x20(KHTML,\x20like\x20Gecko)\x20CriOS/43.0.823.0\x20Mobile/65M532\x20Safari/532.0','Mozilla/5.0\x20(iPod;\x20U;\x20CPU\x20iPhone\x20OS\x203_1\x20like\x20Mac\x20OS\x20X;\x20rw-RW)\x20AppleWebKit/531.9.3\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0.5\x20Mobile/8B118\x20Safari/6531.9.3','Mozilla/5.0\x20(Linux;\x20Android\x209;\x20MI\x206\x20Build/PKQ1.190118.001;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/66.0.3359.126\x20MQQBrowser/6.2\x20TBS/044942\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x2011;\x20Redmi\x20K30\x205G\x20Build/RKQ1.200826.002;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/77.0.3865.120\x20MQQBrowser/6.2\x20TBS/045511\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x2010;\x20ONEPLUS\x20A6000\x20Build/QKQ1.190716.003;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/77.0.3865.120\x20MQQBrowser/6.2\x20TBS/045224\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x209;\x20MHA-AL00\x20Build/HUAWEIMHA-AL00;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/66.0.3359.126\x20MQQBrowser/6.2\x20TBS/044942\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x208.0.0;\x20HTC\x20U-3w\x20Build/OPR6.170623.013;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/66.0.3359.126\x20MQQBrowser/6.2\x20TBS/044942\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x2010;\x20LYA-AL00\x20Build/HUAWEILYA-AL00L;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/77.0.3865.120\x20MQQBrowser/6.2\x20TBS/045230\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x208.1.0;\x20MI\x208\x20Build/OPM1.171019.026;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/66.0.3359.126\x20MQQBrowser/6.2\x20TBS/045131\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x2010;\x20Redmi\x20K20\x20Pro\x20Premium\x20Edition\x20Build/QKQ1.190825.002;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/77.0.3865.120\x20MQQBrowser/6.2\x20TBS/045227\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x208.1.0;\x2016\x20X\x20Build/OPM1.171019.026;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/66.0.3359.126\x20MQQBrowser/6.2\x20TBS/044942\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(Linux;\x20Android\x2010;\x20M2006J10C\x20Build/QP1A.190711.020;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/77.0.3865.120\x20MQQBrowser/6.2\x20TBS/045230\x20Mobile\x20Safari/537.36','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_7\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/532.0\x20(KHTML,\x20like\x20Gecko)\x20FxiOS/18.2n0520.0\x20Mobile/50C216\x20Safari/532.0','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148','Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148'];let ua=User_Agents[uaNum];!(async()=>{if(typeof $request!=='undefined'){await GetRewrite();}else{if(!await Envs())return;else{log('\x0a\x0a=============================================\x20\x20\x20\x20\x0a脚本执行\x20-\x20北京时间(UTC+8)：'+new Date(new Date()['getTime']()+new Date()['getTimezoneOffset']()*(0x1c502^0x1c53e)*(0xe90c6^0xe932e)+(0x8fafa^0x8faf2)*(0x86771^0x8674d)*(0x873af^0x87393)*(0xdda07^0xdd9ef))['toLocaleString']()+'\x20\x0a=============================================\x0a');await poem();await getVersion();log('\x0a============\x20当前版本：'+scriptVersion+'\x20\x20最新版本：'+scriptVersionLatest+'\x20============');log('\x0a===================\x20共找到\x20'+tybodyArr['length']+'\x20个账号\x20===================');if(debug){log('【debug】\x20这是你的全部账号数组:\x0a\x20'+tybodyArr);}for(let _0xc96f90=0x7f001^0x7f001;_0xc96f90<tybodyArr['length'];_0xc96f90++){ua=User_Agents[uaNum+_0xc96f90];if(UA){if(_0xc96f90>=UAArr['length']){let _0x3ba81e=UAArr['length']+randomInt(0x5e664^0x5e664,0x53688^0x5368a);ua=User_Agents[uaNum+_0x3ba81e];}else ua=UAArr[_0xc96f90];}tybody=tybodyArr[_0xc96f90];let _0x3e8766=_0xc96f90+(0x47322^0x47323);log('\x0a=========\x20开始【第\x20'+_0x3e8766+'\x20个账号】=========\x0a');if(debug){log('【debug】\x20这是你的第\x20'+_0x3e8766+'\x20个账号数组:\x0a\x20'+tybody);}msg+='\x0a第'+_0x3e8766+'个账号运行结果：';log('【开始获取AU】');await refreshAu();await $['wait']((0xed899^0xed89b)*(0x51f2b^0x51cc3));newAuArr[_0xc96f90]=tyau;log('【开始查询任务】');await getTask();await $['wait'](0x2*0x3e8);helpTaskIdArr[_0xc96f90]=helpTaskId;if(auback!=(0x26941^0x26940)){for(let _0x28e077=0x51a7d^0x51a7d;_0x28e077<(0x89208^0x89202);_0x28e077++){if(taskBack[_0x28e077]){if(_0x28e077==(0xe4f37^0xe4f37)){log('\x0a助力任务还未完成，建议执行互助\x0a');}else log('【第'+(_0x28e077+(0x335e0^0x335e1))+'个任务未完成，开始执行第'+(_0x28e077+(0xe611a^0xe611b))+'个任务】');await report(_0x28e077);if(_0x28e077==(0x7026d^0x7026f)){await report(_0x28e077);await report(_0x28e077);await report(_0x28e077);await report(_0x28e077);}await $['wait']((0x5accc^0x5acce)*(0x30091^0x30379));await getDrawPriz(_0x28e077);await $['wait']((0xc599f^0xc599d)*(0xe94d8^0xe9730));}}log('【开始收取阳光】');await getSunshine();await $['wait'](0x2*0x3e8);log('【开始进行挑战】');await startCallenge();await $['wait']((0xf16e1^0xf16e3)*(0x918e3^0x91b0b));log('【开始查询冒险奖励】');await queryAdventure();await $['wait']((0xe30ca^0xe30c8)*0x3e8);log('【开始获取植物详情】');await getPlant(_0xc96f90);await $['wait']((0x9c459^0x9c45b)*(0x53c22^0x53fca));plantIdArr[_0xc96f90]=tyPlantId;log('【开始洒阳光】');do{await giveSunshine();await $['wait']((0x914ef^0x914ed)*0x3e8);}while(giveSunshineBack==0x1);log('【开始获取植物详情】');await getPlant(_0xc96f90);await $['wait']((0x8f4ff^0x8f4fd)*(0xa4156^0xa42be));plantIdArr[_0xc96f90]=tyPlantId;log('【开始偷好友阳光】');const _0x134a62=await stealFriendSunshine();msg+='\x0a共偷取好友阳光'+_0x134a62+'g';log('【开始查询信息】');await getUserInfo();await $['wait']((0x5dc38^0x5dc3a)*(0x35b55^0x358bd));idArr[_0xc96f90]=id;}}await SendMsg(msg);}}})()['catch'](_0x8b7b97=>log(_0x8b7b97))['finally'](()=>$['done']());function refreshAu(_0x32e227=(0xc5f43^0xc5f41)*(0x5251a^0x526f2)){let _0x3b3c26={'url':'https://api.xiaoyisz.com/qiehuang/ga/public/api/login','headers':{'Host':'api.xiaoyisz.com','user-agent':''+ua,'Content-Type':'application/json'},'body':''+tybody};return new Promise(_0x1883bb=>{if(debug){log('\x0a【debug】===============\x20这是\x20获取AU\x20请求\x20url\x20===============');log(JSON['stringify'](_0x3b3c26));}$['post'](_0x3b3c26,async(_0x2ff3c8,_0x53f395,_0x2f9e81)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20获取AU\x20返回data==============');log(_0x2f9e81);}let _0x263d5a=JSON['parse'](_0x2f9e81);if(_0x263d5a['code']==(0x7d50c^0x7d50c)){log('获取AU成功');tyau=_0x263d5a['data'];}else if(_0x263d5a['code']==0x1f4){log('获取AU失败，请检查你的变量是否正确，如正确更换到环境变量或者配置文件重试');auback=0x1;}else{log('获取AU失败，原因是：'+_0x263d5a['message']);}}catch(_0x3148f5){log(_0x3148f5);}finally{_0x1883bb();}},_0x32e227);});}async function stealFriendSunshine(_0x368cf5=(0x9a99a^0x9a998)*0x3e8){let _0x4ea035={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/friend/list?page=1&size=50&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'Content-Type':'application/json'}};return new Promise(async _0x29da84=>{if(debug){log('\x0a【debug】===============\x20这是\x20朋友列表\x20请求\x20url\x20===============');log(JSON['stringify'](_0x4ea035));}$['get'](_0x4ea035,async(_0xff2a8b,_0x18819a,_0x3a32b5)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20朋友列表\x20返回data==============');log(_0x3a32b5);}let _0x56ed1c=JSON['parse'](_0x3a32b5);if(_0x56ed1c['code']==(0xd4c7b^0xd4ff3)){refreshAu();}else if(_0x56ed1c['code']===(0xaf646^0xaf646)){const {data:{content:_0x39285c}}=_0x56ed1c;if(_0x39285c['length']>(0xbe718^0xbe718)){const _0x3a8df4=_0x39285c['filter'](_0x3435d7=>_0x3435d7['stealAble']);log('可偷好友列表为',_0x3a8df4['length']);if(_0x3a8df4['length']>(0xcc0dc^0xcc0dc)){const _0x44067b=await _0x3a8df4['reduce'](async(_0x323082,_0xe74eb3)=>{const _0x4a9c6c=await _0x323082;if(stealFull){console['log']('最多偷取10人，不再偷取');return _0x4a9c6c;}else{const _0x569d79=await stealSunshine(_0xe74eb3['userId']);await $['wait']((0x7c0eb^0x7c0e9)*(0x345ed^0x34605));return _0x4a9c6c+_0x569d79;}},0x0);console['log']('偷取的数据',_0x44067b);_0x29da84(_0x44067b);}else _0x29da84(0x4bc0f^0x4bc0f);}else{log('没有好友，退出');_0x29da84(0x0);}}else{log('遇到错误，原因是：'+_0x56ed1c['message']);_0x29da84(0x0);}}catch(_0x25b346){log(_0x25b346);}finally{_0x29da84(0xc35db^0xc35db);}},_0x368cf5);});}function stealSunshine(_0x1e0244,_0x2993c2=(0xaa367^0xaa365)*(0x534b1^0x53759)){return new Promise(_0xbd0f31=>{let _0x9a04d5={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/daily/steal?friendUserId='+_0x1e0244+'&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'Content-Type':'application/json'}};if(debug){log('\x0a【debug】===============\x20这是\x20偷好友阳光\x20请求\x20url\x20===============');log(JSON['stringify'](_0x9a04d5));}$['get'](_0x9a04d5,async(_0x35946a,_0x5013f4,_0x43d91c)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20偷好友阳光\x20返回data==============');log(_0x43d91c);}let _0x45a748=JSON['parse'](_0x43d91c);if(_0x45a748['code']==(0x93547^0x936cf)){refreshAu();}else if(_0x45a748['code']===0x0){const {data:_0x389855}=_0x45a748;if(_0x389855>(0xe8a82^0xe8a82)){log('偷到好友阳光\x20'+_0x389855+'g');return _0xbd0f31(_0x389855);}else return _0xbd0f31(0xacc12^0xacc12);}else{log('遇到错误，原因是：'+JSON['stringify'](_0x45a748));stealFull=!![];_0xbd0f31(0x0);}}catch(_0x7a3de0){log(_0x7a3de0);stealFull=!![];_0xbd0f31(0x700be^0x700be);}},_0x2993c2);});}function report(_0xa4e966){let _0x298a6f={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/task/report?taskType='+taskTypeArr[_0xa4e966]+'&attachId='+timestampMs()+'&taskId='+taskIdArr[_0xa4e966]+'&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x3b7d23=>{if(debug){log('\x0a【debug】===============\x20这是\x20上报任务\x20请求\x20url\x20===============');log(JSON['stringify'](_0x298a6f));}$['get'](_0x298a6f,async(_0x18f608,_0x876cb,_0x349a08)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20上报任务\x20返回data==============');log(_0x349a08);}let _0x3289c0=JSON['parse'](_0x349a08);if(_0x3289c0['code']==0x388){refreshAu();}if(_0x3289c0['code']==0x386){auback=0x4e6d2^0x4e6d3;log('AU失效，请重抓');msg+='\x0aAU失效，请重抓';}else if(_0x3289c0['data']['status']===(0x85dd9^0x85dd8)){log('上报任务成功');}else if(_0x3289c0['data']['status']==-0x2||_0x3289c0['data']['status']==(0xefe0b^0xefe09)){log('上报任务失败，可能是已经完成');}else{log('上报任务失败，原因是：'+_0x3289c0['message']);}}catch(_0x263435){log(_0x263435);}finally{_0x3b7d23();}});});}function getDrawPriz(_0x88b2bc){let _0x3daf3c={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/task/drawPrize?taskId='+taskIdArr[_0x88b2bc]+'&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x523ff8=>{if(debug){log('\x0a【debug】===============\x20这是\x20领取奖励\x20请求\x20url\x20===============');log(JSON['stringify'](_0x3daf3c));}$['get'](_0x3daf3c,async(_0xf76507,_0x364d99,_0x1aaf04)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20领取奖励\x20返回data==============');log(_0x1aaf04);}let _0x2475d8=JSON['parse'](_0x1aaf04);if(_0x2475d8['code']==(0x3eb7b^0x3e8f3)){refreshAu();}if(_0x2475d8['code']==0x386){auback=0xc1bf5^0xc1bf4;log('AU失效，请重抓');msg+='\x0aAU失效，请重抓';}else if(_0x2475d8['code']===(0x7b3b4^0x7b05c)){log('任务不是待领取状态');}else if(_0x2475d8['code']==(0x6e623^0x6e623)){let _0x22f2dc=eval(_0x2475d8['data']);log('['+_0x22f2dc['name']+']任务领取奖励成功');}else{log('任务领取奖励失败，原因是：'+_0x2475d8['message']);}}catch(_0x43cdc1){log(_0x43cdc1);}finally{_0x523ff8();}});});}function getTask(_0x502054=(0xae54c^0xae54e)*0x3e8){let _0x465b44={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/task/list?'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x37ee95=>{if(debug){log('\x0a【debug】===============\x20这是\x20获取任务\x20请求\x20url\x20===============');log(JSON['stringify'](_0x465b44));}$['get'](_0x465b44,async(_0x2b069f,_0x50b82c,_0x47fa09)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20获取任务\x20返回data==============');log(_0x47fa09);}let _0x8fcad5=JSON['parse'](_0x47fa09);let _0x5a2c22=eval(_0x8fcad5);if(_0x8fcad5['code']==(0x5c0f2^0x5c377)||_0x8fcad5['code']==0x386||_0x8fcad5['code']==0x387){auback=0x1;log('AU错误，可能是获取失败，请更换到环境变量或配置文件重试');msg+='\x0aAU错误，可能是获取失败，请更换到环境变量或配置文件重试';}if(auback!=(0x68271^0x68270)&&_0x8fcad5['code']==(0x4ae10^0x4ae10)){log('获取任务列表成功');for(let _0x2ddbd0=0x0;_0x2ddbd0<0xa;_0x2ddbd0++){if(_0x2ddbd0==(0x5fe43^0x5fe43)){helpTaskId=_0x5a2c22['data'][_0x2ddbd0]['taskId'];}taskType=_0x5a2c22['data'][_0x2ddbd0]['taskType'];taskTypeArr[_0x2ddbd0]=taskType;taskId=_0x5a2c22['data'][_0x2ddbd0]['taskId'];taskIdArr[_0x2ddbd0]=taskId;if(_0x5a2c22['data'][_0x2ddbd0]['completeTimes']!=_0x5a2c22['data'][_0x2ddbd0]['retryTimes']){taskBack[_0x2ddbd0]=0x1;}}}}catch(_0x348d36){log(_0x348d36);}finally{_0x37ee95();}},_0x502054);});}function getPlant(_0xa97cb1){let _0x1a02e8={'url':'https://api.xiaoyisz.com/qiehuang/ga/plant/info?userId=-1&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x431fe7=>{if(debug){log('\x0a【debug】===============\x20这是\x20获取植物详情\x20请求\x20url\x20===============');log(JSON['stringify'](_0x1a02e8));}$['get'](_0x1a02e8,async(_0x421c86,_0x3d0955,_0x85ac94)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20获取植物详情\x20返回data==============');log(_0x85ac94);}let _0x123842=JSON['parse'](_0x85ac94);let _0x327104=eval(_0x123842);if(_0x123842['code']==0x388){refreshAu();}if(_0x123842['data']['stage']==-(0x6af8c^0x6af8d)){await $['wait'](0x2*(0x8386d^0x83b85));getNewPlant();}if(_0x123842['code']==0x0){log('获取植物详情成功');tyPlantId=_0x123842['data']['plantId'];progress=+_0x123842['data']['currentSunshineNum']/_0x123842['data']['needSunshineNum'];progress=progress*(0x57d6d^0x57d09);progress=progress['toFixed'](0xa9570^0xa9572);plantStage=+_0x123842['data']['stage'];}else log('获取植物详情失败');}catch(_0x11c456){log(_0x11c456);}finally{_0x431fe7();}});});}function startCallenge(_0x3407dd=0x2*(0xd7148^0xd72a0)){let _0x4ee22a={'url':'https://api.xiaoyisz.com/qiehuang/ga/challenge/start?'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x23dbeb=>{if(debug){log('\x0a【debug】===============\x20这是\x20开始挑战\x20请求\x20url\x20===============');log(JSON['stringify'](_0x4ee22a));}$['get'](_0x4ee22a,async(_0x4b7149,_0x3d15f6,_0x195207)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20开始挑战\x20返回data==============');log(_0x195207);}let _0x178734=JSON['parse'](_0x195207);if(_0x178734['code']==(0x5561a^0x55592)){refreshAu();}if(auback!=(0x43ac3^0x43ac2)&&_0x178734['code']==(0x1a933^0x1a933)){challengeId=_0x178734['data'];reportCallenge();$['wait']((0x187cd^0x187cf)*0x3e8);}else if(_0x178734['code']==(0x5eec7^0x5ed2f)){log('开始挑战失败，次数不足');}}catch(_0x3432a0){log(_0x3432a0);}finally{_0x23dbeb();}},_0x3407dd);});}function reportCallenge(_0x55c502=0x2*0x3e8){let _0x4b6a77={'url':'https://api.xiaoyisz.com/qiehuang/ga/challenge/report','headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'Content-Type':'application/json'},'body':'{\x22battleId\x22:'+challengeId+',\x22result\x22:1,\x22costMillisecond\x22:'+randomInt(0xb3c9d^0xb25f9,0xc269e^0xc087e)+'}'};return new Promise(_0x149db7=>{if(debug){log('\x0a【debug】===============\x20这是\x20上报挑战\x20请求\x20url\x20===============');log(JSON['stringify'](_0x4b6a77));}$['post'](_0x4b6a77,async(_0x52e068,_0x363ed7,_0x509673)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20上报挑战\x20返回data==============');log(_0x509673);}let _0x26fb62=JSON['parse'](_0x509673);let _0x1bd246=eval(_0x26fb62['data']);if(_0x26fb62['code']==0x388){refreshAu();}if(auback!=(0xe2e11^0xe2e10)&&_0x26fb62['code']==(0xca83f^0xca83f)){log('挑战成功');startCallenge();}else log('挑战次数不足');}catch(_0x27e50d){log(_0x27e50d);}finally{_0x149db7();}},_0x55c502);});}function startAdventure(_0x18994e=0x2*0x3e8){let _0x1b39b5={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/adventure/start?'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x31b44a=>{if(debug){log('\x0a【debug】===============\x20这是\x20开始冒险\x20请求\x20url\x20===============');log(JSON['stringify'](_0x1b39b5));}$['get'](_0x1b39b5,async(_0x111dd1,_0x196d23,_0x4cedfa)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20开始冒险\x20返回data==============');log(_0x4cedfa);}let _0x43650f=JSON['parse'](_0x4cedfa);if(_0x43650f['code']==(0x74ef8^0x74d70)){refreshAu();}if(_0x43650f['code']==0x0){log('冒险开始成功');}else if(_0x43650f['code']==0x3e8){log('冒险开始失败，可能是上报异常或者当前已有冒险');}else log(''+_0x43650f['message']);}catch(_0x4535c9){log(_0x4535c9);}finally{_0x31b44a();}},_0x18994e);});}function queryAdventure(_0x56e69a=(0x50f06^0x50f04)*(0xed9d3^0xeda3b)){let _0x229039={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/adventure/info?userId=-1&type=2&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x4fac82=>{if(debug){log('\x0a【debug】===============\x20这是\x20查询冒险\x20请求\x20url\x20===============');log(JSON['stringify'](_0x229039));}$['get'](_0x229039,async(_0x1c5746,_0x50e9b8,_0x21bde8)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20查询冒险\x20返回data==============');log(_0x21bde8);}let _0x40bcc8=JSON['parse'](_0x21bde8);if(_0x40bcc8['code']==(0xd121b^0xd1193)){refreshAu();}if(_0x40bcc8['code']==0x0){adventureId=_0x40bcc8['data']['adventureId'];if(timestampS()>=_0x40bcc8['data']['endTime']){reportAdventure();}else{let _0x7e515d=+_0x40bcc8['data']['endTime']-timestampS();if(_0x7e515d<=0x3c){log('距离冒险结束小于一分钟，等待'+_0x7e515d+'秒后收取冒险奖励');await sleep(_0x7e515d*(0xe3c6c^0xe3f84));reportAdventure();}else log('距离冒险结束还有：'+parseInt(_0x7e515d/(0xe9ec5^0xe90d5))+'小时'+parseInt(_0x7e515d%(0xef6dd^0xef8cd)/0x3c)+'分钟'+parseInt(_0x7e515d%(0x4fc44^0x4fc78))+'秒，大于一分钟，不进行等待');}}else log('查询上一次冒险失败，可能是未进行');}catch(_0x2ccca0){log(_0x2ccca0);}finally{_0x4fac82();}},_0x56e69a);});}function reportAdventure(_0x1b4056=(0x5e72c^0x5e72e)*0x3e8){let _0x20668b={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/adventure/drawPrize?adventureId='+adventureId+'&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'Content-Type':'application/json'}};return new Promise(_0xba0950=>{if(debug){log('\x0a【debug】===============\x20这是\x20上报冒险\x20请求\x20url\x20===============');log(JSON['stringify'](_0x20668b));}$['get'](_0x20668b,async(_0x31ff8c,_0x25e59b,_0x529789)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20上报冒险\x20返回data==============');log(_0x529789);}let _0x50e928=JSON['parse'](_0x529789);let _0x313297=eval(_0x50e928['data']);if(_0x50e928['code']==(0x71bd6^0x7185e)){refreshAu();}if(_0x50e928['code']==(0x7c674^0x7c674)){log('冒险收取成功');}else if(_0x50e928['code']==(0x795ff^0x7940b)){log('当前无可收取的冒险');}else if(_0x50e928['code']==(0x91c11^0x91ff9)){log('冒险已收取');}else log('冒险未到时间');}catch(_0x3a8a07){log(_0x3a8a07);}finally{_0xba0950();}},_0x1b4056);});}function giveSunshine(_0x555cad=(0x5d4b9^0x5d4bb)*(0xbfc5e^0xbffb6)){let _0x35c3c3={'url':'https://api.xiaoyisz.com/qiehuang/ga/plant/batchgiveSunshine?plantId='+tyPlantId+'&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x217767=>{if(debug){log('\x0a【debug】===============\x20这是\x20洒阳光\x20请求\x20url\x20===============');log(JSON['stringify'](_0x35c3c3));}$['get'](_0x35c3c3,async(_0x2013fd,_0x29c0b3,_0x202d42)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20洒阳光\x20返回data==============');log(_0x202d42);}let _0x555677=JSON['parse'](_0x202d42);let _0x1066dd=eval(_0x555677['data']);if(_0x555677['code']==(0x33c8b^0x33f03)){refreshAu();}if(_0x555677['message']=='已达到收获阶段'){log('【开始收取植物】');$['wait']((0xc2d61^0xc2d63)*(0xd70f8^0xd7310));getHarvest();}else if(_0x555677['message']=='plantId错误'){log('plantId错误，可能是运行的bug，不用管');}else if(_0x555677['message']=='只能给自己批量洒阳光'){log('只能给自己批量洒阳光');}else if(_0x555677['message']=='阳光不足'){log('阳光不足');giveSunshineBack=0x0;}else if(_0x555677['message']!='阳光不足'){log('洒阳光成功');if(_0x1066dd['currentSunshineNum']==_0x1066dd['needSunshineNum']){$['wait'](0x3*0x3e8);upgrade();}giveSunshineBack=0x1;}}catch(_0x1d141c){log(_0x1d141c);}finally{_0x217767();}},_0x555cad);});}function upgrade(_0x200123=0x2*(0xb9bc9^0xb9821)){let _0xc24ff1={'url':'https://api.xiaoyisz.com/qiehuang/ga/plant/upgrade?plantId='+tyPlantId+'&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x49387d=>{if(debug){log('\x0a【debug】===============\x20这是\x20浇水\x20请求\x20url\x20===============');log(JSON['stringify'](_0xc24ff1));}$['get'](_0xc24ff1,async(_0x15a6af,_0x300103,_0x2eba0e)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20浇水\x20返回data==============');log(_0x2eba0e);}let _0xe2dab8=JSON['parse'](_0x2eba0e);let _0x2e8c59=eval(_0xe2dab8['data']);if(_0xe2dab8['code']==0x388){refreshAu();}if(_0xe2dab8['code']==(0xba300^0xba300)){log('浇水升级成功');}}catch(_0x16149a){log(_0x16149a);}finally{_0x49387d();}},_0x200123);});}function getTomato(_0x27eeee=0x2*0x3e8){let _0x335cf0={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/info?userId=-1&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'Content-Type':'application/json'}};return new Promise(_0x2c10db=>{if(debug){log('\x0a【debug】===============\x20这是\x20查询番茄余额\x20请求\x20url\x20===============');log(JSON['stringify'](_0x335cf0));}$['get'](_0x335cf0,async(_0x1291c2,_0x291682,_0x530b65)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20查询番茄余额\x20返回data==============');log(_0x530b65);}let _0xf3704b=JSON['parse'](_0x530b65);let _0x52da1c=eval(_0xf3704b['data']);if(_0xf3704b['code']==0x388){refreshAu();}if(_0xf3704b['code']==(0x60f1e^0x60f1e)){if(plantStage==0x0){plantStatus='发育期';}else if(plantStage==0x1){plantStatus='幼苗期';}else if(plantStage==(0x2bb79^0x2bb7b)){plantStatus='开花期';}else if(plantStage==(0x4deed^0x4deee)){plantStatus='结果期';}log('查询成功，账号['+name+']番茄余额为：'+_0x52da1c['tomatoNum']+'，植物状态为：'+plantStatus+'，进度：'+progress+'%');msg+='\x0a账号['+name+']番茄余额为：'+_0x52da1c['tomatoNum']+'，植物状态为：'+plantStatus+'，进度：'+progress+'%';}}catch(_0x32653e){log(_0x32653e);}finally{_0x2c10db();}},_0x27eeee);});}function getSunshine(_0x474f7b=0x2*(0xef19d^0xef275)){let _0x5c4de0={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/daily/pickup?'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x2a9e1f=>{if(debug){log('\x0a【debug】===============\x20这是\x20收取阳光\x20请求\x20url\x20===============');log(JSON['stringify'](_0x5c4de0));}$['get'](_0x5c4de0,async(_0x4abc43,_0x2f445d,_0x419f10)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20收取阳光\x20返回data==============');log(_0x419f10);}let _0x13a9eb=JSON['parse'](_0x419f10);if(_0x13a9eb['code']==0x388){refreshAu();}if(_0x13a9eb['code']==(0xdc808^0xdc808)){log('收取阳光成功');}else if(_0x13a9eb['code']==(0x7e753^0x7e4bb)){log('收取阳光失败，无可收取的阳光');}else log('收取失败，原因是：'+_0x13a9eb['message']);}catch(_0x31a22d){log(_0x31a22d);}finally{_0x2a9e1f();}},_0x474f7b);});}function getHarvest(_0x3a2ae8=(0x54534^0x54536)*(0x75de5^0x75e0d)){let _0x41f59c={'url':'https://api.xiaoyisz.com/qiehuang/ga/plant/harvest?plantId='+tyPlantId+'&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'Content-Type':'application/json'}};return new Promise(_0x2198e5=>{if(debug){log('\x0a【debug】===============\x20这是\x20收植物\x20请求\x20url\x20===============');log(JSON['stringify'](_0x41f59c));}$['get'](_0x41f59c,async(_0x458fa9,_0x24874e,_0x18267c)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20收植物\x20返回data==============');log(_0x18267c);}let _0x20c0ea=JSON['parse'](_0x18267c);let _0x4c5487=eval(_0x20c0ea['data']);if(_0x20c0ea['code']==(0xb2588^0xb2600)){refreshAu();}if(_0x20c0ea['code']==(0x2487f^0x2487f)){log('植物奖励收取成功，获得'+_0x4c5487['infos'][0xe29cc^0xe29cc]['num']+'个番茄');getNewPlant();}else if(_0x20c0ea['code']==0x3e8){log('植物奖励已收取');}else log('植物奖励收取失败，原因是：'+_0x20c0ea['message']);}catch(_0x226c89){log(_0x226c89);}finally{_0x2198e5();}},_0x3a2ae8);});}function getNewPlant(_0x35b64c=0x2*(0x2567a^0x25592)){let _0x5cf38e={'url':'https://api.xiaoyisz.com/qiehuang/ga/plant/start?'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'Content-Type':'application/json'}};return new Promise(_0x457a2e=>{if(debug){log('\x0a【debug】===============\x20这是\x20种植物\x20请求\x20url\x20===============');log(JSON['stringify'](_0x5cf38e));}$['get'](_0x5cf38e,async(_0x14e5d5,_0x50f623,_0x202d5d)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20种植物\x20返回data==============');log(_0x202d5d);}let _0x211d0b=JSON['parse'](_0x202d5d);let _0x1e193f=eval(_0x211d0b['data']);if(_0x211d0b['code']==0x388){refreshAu();}if(_0x211d0b['code']==(0xa6f0f^0xa6f0f)){log('种新的植物成功');await $['wait']((0x8e10f^0x8e10d)*0x3e8);getPlant();await $['wait']((0x80be3^0x80be1)*0x3e8);giveSunshine();}else if(_0x211d0b['code']==(0x7a0aa^0x7a342)){log('种失败，原因是：已种植');}else log('种新的植物失败，原因是：'+_0x211d0b['message']);}catch(_0x4d7319){log(_0x4d7319);}finally{_0x457a2e();}},_0x35b64c);});}function getUserInfo(_0x26f091=(0xd9f1b^0xd9f19)*0x3e8){let _0x15385d={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/info?'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+tyau,'user-agent':''+ua,'Content-Type':'application/json'}};return new Promise(_0xb35c77=>{if(debug){log('\x0a【debug】===============\x20这是\x20获取信息\x20请求\x20url\x20===============');log(JSON['stringify'](_0x15385d));}$['get'](_0x15385d,async(_0x599c45,_0x52f621,_0xaa5352)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20获取信息\x20返回data==============');log(_0xaa5352);}let _0x515db1=JSON['parse'](_0xaa5352);let _0x441d03=eval(_0x515db1['data']);if(_0x515db1['code']==0x388){refreshAu();}if(_0x515db1['code']==(0x572c0^0x572c0)){name=_0x441d03['nickName'];id=_0x441d03['id'];await $['wait'](0x2*0x3e8);getTomato();}else log('获取信息失败，原因是：'+_0x515db1['message']);}catch(_0x2a1996){log(_0x2a1996);}finally{_0xb35c77();}},_0x26f091);});}function doHelp(_0xbf192e,_0x3d5359){let _0x374621={'url':'https://api.xiaoyisz.com/qiehuang/ga/user/task/report?taskType='+taskTypeArr[0x0]+'&attachId='+idArr[_0x3d5359]+'&taskId='+helpTaskIdArr[_0xbf192e]+'&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+newAuArr[_0xbf192e],'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x1a28e4=>{if(debug){log('\x0a【debug】===============\x20这是\x20互助\x20请求\x20url\x20===============');log(JSON['stringify'](_0x374621));}$['get'](_0x374621,async(_0x11d584,_0x757f9a,_0x1b84bf)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20互助\x20返回data==============');log(_0x1b84bf);}let _0x59d968=JSON['parse'](_0x1b84bf);if(_0x59d968['data']['status']==(0xd8317^0xd8316)){log('去助力['+_0x59d968['data']['nickName']+']成功');}else if(_0x59d968['data']['status']==0x3){log('助力失败，可能是已助力过');}else if(_0x59d968['data']['status']==(0x9a4e3^0x9a4e1)){log('助力失败，该用户被助力次数已达上限');}else{log('助力失败，原因是：'+_0x59d968['message']);}}catch(_0x1bb374){log(_0x1bb374);}finally{_0x1a28e4();}});});}function doHelpGiveSunshine(_0x1b6a29,_0x325adc){let _0x2892c8={'url':'https://api.xiaoyisz.com/qiehuang/ga/plant/giveSunshine?plantId='+plantIdArr[_0x325adc]+'&'+getBody(),'headers':{'Host':'api.xiaoyisz.com','authorization':''+newAuArr[_0x1b6a29],'user-agent':''+ua,'content-type':'application/json'}};return new Promise(_0x370177=>{if(debug){log('\x0a【debug】===============\x20这是\x20互助洒阳光\x20请求\x20url\x20===============');log(JSON['stringify'](_0x2892c8));}$['get'](_0x2892c8,async(_0xa3c7f7,_0x404182,_0x52cb7b)=>{try{if(debug){log('\x0a\x0a【debug】===============这是\x20互助洒阳光\x20返回data==============');log(_0x52cb7b);}let _0x11dcf9=JSON['parse'](_0x52cb7b);if(_0x11dcf9['code']==0x0){log('助力洒阳光成功');}else if(_0x11dcf9['code']==(0xf03f6^0xf001e)){log('助力洒阳光失败，今日已达上限');}else{log('助力洒阳光失败，原因是：'+_0x11dcf9['message']);}}catch(_0x3f5a6f){log(_0x3f5a6f);}finally{_0x370177();}});});}async function GetRewrite(){if($request['url']['indexOf']('qiehuang/ga/public/api/login')>-0x1){const _0x3ad1e5=$request['body'];if(tybody){if(tybody['indexOf'](_0x3ad1e5)==-0x1){tybody=tybody+'@'+_0x3ad1e5;let _0x48232d=_0x48232d+'@'+_0x3ad1e5;$['setdata'](tybody,'tybody');$['setdata'](tybody,'tyhz');List=tybody['split']('@');$['msg']($['name']+('\x20获取第'+tybody['length']+'个\x20ck\x20成功:\x20'+_0x3ad1e5+'\x20,不用请自行关闭重写!'));}}else{$['setdata'](_0x3ad1e5,'tybody');$['msg']($['name']+('\x20获取第1个\x20ck\x20成功:\x20'+_0x3ad1e5+'\x20,不用请自行关闭重写!'));}}}async function Envs(){if(UA){if(UA['indexOf']('@')!=-(0x4dcb8^0x4dcb9)){UA['split']('@')['forEach'](_0x3caa6d=>{UAArr['push'](_0x3caa6d);});}else if(UA['indexOf']('\x0a')!=-(0xba610^0xba611)){UA['split']('\x0a')['forEach'](_0x463b4b=>{UAArr['push'](_0x463b4b);});}else{UAArr['push'](UA);}}if(tybody){if(tybody['indexOf']('@')!=-0x1){tybody['split']('@')['forEach'](_0x5b78dd=>{tybodyArr['push'](_0x5b78dd);});}else if(tybody['indexOf']('\x0a')!=-0x1){tybody['split']('\x0a')['forEach'](_0x463cc0=>{tybodyArr['push'](_0x463cc0);});}else{tybodyArr['push'](tybody);}}else{log('\x0a\x20【'+$['name']+'】：未填写变量\x20tybody');return;}return!![];}async function SendMsg(_0x17fb8b){if(!_0x17fb8b)return;if(Notify>(0xc7daf^0xc7daf)){if($['isNode']()){var _0x242806=require('./sendNotify');await _0x242806['sendNotify']($['name'],_0x17fb8b);}else{$['msg'](_0x17fb8b);}}else{log(_0x17fb8b);}}function getBody(){let _0x31099c=timestampMs();let _0xf80af9=randomString();let _0x4e95f6=getSortedQuery({'clientKey':'IfWu0xwXlWgqkIC7DWn20qpo6a30hXX6','clientSecret':'A4rHhUJfMjw2I5CODh5g40Ja1d3Yk1CH','timestamp':_0x31099c,'nonce':_0xf80af9});let _0x4763a1=crypto['MD5'](_0x4e95f6)['toString']()['toUpperCase']();return'timestamp='+_0x31099c+'&nonce='+_0xf80af9+'&signature='+_0x4763a1;}function getSortedQuery(_0xe0ee78){var _0x3650f8=Object['keys'](_0xe0ee78)['sort'](),_0x2d4767='';return _0x3650f8['forEach'](function(_0x4ecb7a){if(_0xe0ee78[_0x4ecb7a]||(0x92b0c^0x92b0c)===_0xe0ee78[_0x4ecb7a]){var _0x133aaf;_0x133aaf=_0xe0ee78[_0x4ecb7a]instanceof Object?_0x4ecb7a+'='+JSON['stringify'](_0xe0ee78[_0x4ecb7a]):_0x4ecb7a+'='+_0xe0ee78[_0x4ecb7a],_0x2d4767&&_0x133aaf&&(_0x2d4767+='&'),_0x2d4767+=_0x133aaf;}}),_0x2d4767;}function randomString(_0x334fcc){void 0x0===_0x334fcc&&(_0x334fcc=0x10);for(var _0x104091='ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678',_0x436513=_0x104091['length'],_0x398895='',_0x2eed42=0xd26ed^0xd26ed;_0x2eed42<_0x334fcc;_0x2eed42++)_0x398895+=_0x104091['charAt'](Math['floor'](Math['random']()*_0x436513));return _0x398895;}function randomInt(_0x3abd1e,_0x35a323){return Math['round'](Math['random']()*(_0x35a323-_0x3abd1e)+_0x3abd1e);}function timestampMs(){return new Date()['getTime']();}function timestampS(){return Date['parse'](new Date())/(0xed487^0xed76f);}function poem(_0x5c5284=0x3*(0xb99e6^0xb9a0e)){return new Promise(_0x22d442=>{let _0x471f4e={'url':'https://v1.jinrishici.com/all.json'};$['get'](_0x471f4e,async(_0x564e25,_0x3c4bde,_0x21d3df)=>{try{_0x21d3df=JSON['parse'](_0x21d3df);log(_0x21d3df['content']+'\x20\x20\x0a————《'+_0x21d3df['origin']+'》'+_0x21d3df['author']);}catch(_0x478f4e){log(_0x478f4e,_0x3c4bde);}finally{_0x22d442();}},_0x5c5284);});}function modify(){fs['readFile']('/ql/data/config/config.sh','utf8',function(_0x37b2cb,_0x4e9bff){if(_0x37b2cb){return log('读取文件失败！'+_0x37b2cb);}else{var _0x1abd70=_0x4e9bff['replace'](/tyau="[\w-\s/+@]{0,1000}"/g,'tyau=\x22'+newAuArr[0x0]+'@'+newAuArr[0x1]+'@'+newAuArr[0xe4ef4^0xe4ef6]+'\x22');fs['writeFile']('/ql/data/config/config.sh',_0x1abd70,'utf8',function(_0x48f5a5){if(_0x48f5a5){return log(_0x48f5a5);}});}});}function sleep(_0x55cc33){return new Promise(_0x3126ab=>setTimeout(_0x3126ab,_0x55cc33));}function getVersion(_0x5edc47=(0x4c8e6^0x4c8e5)*0x3e8){return new Promise(_0x2bcc30=>{let _0x3c8964={'url':'https://raw.gh.fakev.cn/LinYuanovo/scripts/main/tyqh.js'};$['get'](_0x3c8964,async(_0xa967fc,_0x103c19,_0x3beabf)=>{try{scriptVersionLatest=_0x3beabf['match'](/scriptVersion = "([\d\.]+)"/)[0x1];}catch(_0x506a0c){$['logErr'](_0x506a0c,_0x103c19);}finally{_0x2bcc30();}},_0x5edc47);});}function Env(_0x293ecd,_0x39e6c3){'undefined'!=typeof process&&JSON['stringify'](process['env'])['indexOf']('GITHUB')>-(0x9e237^0x9e236)&&process['exit'](0xca010^0xca010);class _0x156ac8{constructor(_0x48596e){this['env']=_0x48596e;}['send'](_0x1ab002,_0x3d8aab='GET'){_0x1ab002='string'==typeof _0x1ab002?{'url':_0x1ab002}:_0x1ab002;let _0x256733=this['get'];return'POST'===_0x3d8aab&&(_0x256733=this['post']),new Promise((_0x244d6d,_0x4bf132)=>{_0x256733['call'](this,_0x1ab002,(_0x10664c,_0xd94412,_0x361f08)=>{_0x10664c?_0x4bf132(_0x10664c):_0x244d6d(_0xd94412);});});}['get'](_0x3176e8){return this['send']['call'](this['env'],_0x3176e8);}['post'](_0x534da9){return this['send']['call'](this['env'],_0x534da9,'POST');}}return new class{constructor(_0x356fea,_0x547e2f){this['name']=_0x356fea,this['http']=new _0x156ac8(this),this['data']=null,this['dataFile']='box.dat',this['logs']=[],this['isMute']=!(0x28a23^0x28a22),this['isNeedRewrite']=!(0xea788^0xea789),this['logSeparator']='\x0a',this['startTime']=new Date()['getTime'](),Object['assign'](this,_0x547e2f),this['log']('','🔔'+this['name']+',\x20开始!');}['isNode'](){return'undefined'!=typeof module&&!!module['exports'];}['isQuanX'](){return'undefined'!=typeof $task;}['isSurge'](){return'undefined'!=typeof $httpClient&&'undefined'==typeof $loon;}['isLoon'](){return'undefined'!=typeof $loon;}['toObj'](_0x38003b,_0x4b8e55=null){try{return JSON['parse'](_0x38003b);}catch{return _0x4b8e55;}}['toStr'](_0x5e1e15,_0x5173fc=null){try{return JSON['stringify'](_0x5e1e15);}catch{return _0x5173fc;}}['getjson'](_0x50a409,_0x1952cf){let _0x2f0281=_0x1952cf;const _0x4065df=this['getdata'](_0x50a409);if(_0x4065df)try{_0x2f0281=JSON['parse'](this['getdata'](_0x50a409));}catch{}return _0x2f0281;}['setjson'](_0x3aa16c,_0x5b1bfe){try{return this['setdata'](JSON['stringify'](_0x3aa16c),_0x5b1bfe);}catch{return!(0xc3661^0xc3660);}}['getScript'](_0x5159cd){return new Promise(_0x102db2=>{this['get']({'url':_0x5159cd},(_0x45955c,_0x32d389,_0x5195cc)=>_0x102db2(_0x5195cc));});}['runScript'](_0x10d588,_0x2d3fb7){return new Promise(_0x127129=>{let _0x340451=this['getdata']('@chavy_boxjs_userCfgs.httpapi');_0x340451=_0x340451?_0x340451['replace'](/\n/g,'')['trim']():_0x340451;let _0x547117=this['getdata']('@chavy_boxjs_userCfgs.httpapi_timeout');_0x547117=_0x547117?0x1*_0x547117:0x14,_0x547117=_0x2d3fb7&&_0x2d3fb7['timeout']?_0x2d3fb7['timeout']:_0x547117;const [_0x470bd2,_0x30cf8e]=_0x340451['split']('@'),_0x354af3={'url':'http://'+_0x30cf8e+'/v1/scripting/evaluate','body':{'script_text':_0x10d588,'mock_type':'cron','timeout':_0x547117},'headers':{'X-Key':_0x470bd2,'Accept':'*/*'}};this['post'](_0x354af3,(_0x56e57c,_0x1beafa,_0x11fa61)=>_0x127129(_0x11fa61));})['catch'](_0xebbec6=>this['logErr'](_0xebbec6));}['loaddata'](){if(!this['isNode']())return{};{this['fs']=this['fs']?this['fs']:require('fs'),this['path']=this['path']?this['path']:require('path');const _0xb41834=this['path']['resolve'](this['dataFile']),_0x3a723a=this['path']['resolve'](process['cwd'](),this['dataFile']),_0x52b952=this['fs']['existsSync'](_0xb41834),_0x3ce082=!_0x52b952&&this['fs']['existsSync'](_0x3a723a);if(!_0x52b952&&!_0x3ce082)return{};{const _0x59f6d1=_0x52b952?_0xb41834:_0x3a723a;try{return JSON['parse'](this['fs']['readFileSync'](_0x59f6d1));}catch(_0x5082bd){return{};}}}}['writedata'](){if(this['isNode']()){this['fs']=this['fs']?this['fs']:require('fs'),this['path']=this['path']?this['path']:require('path');const _0x21c818=this['path']['resolve'](this['dataFile']),_0x411894=this['path']['resolve'](process['cwd'](),this['dataFile']),_0x13a337=this['fs']['existsSync'](_0x21c818),_0x2d4893=!_0x13a337&&this['fs']['existsSync'](_0x411894),_0x4e792e=JSON['stringify'](this['data']);_0x13a337?this['fs']['writeFileSync'](_0x21c818,_0x4e792e):_0x2d4893?this['fs']['writeFileSync'](_0x411894,_0x4e792e):this['fs']['writeFileSync'](_0x21c818,_0x4e792e);}}['lodash_get'](_0x263cdf,_0x1b3f48,_0x35104a){const _0x5cb2e1=_0x1b3f48['replace'](/\[(\d+)\]/g,'.$1')['split']('.');let _0xa973e7=_0x263cdf;for(const _0x251871 of _0x5cb2e1)if(_0xa973e7=Object(_0xa973e7)[_0x251871],void 0x0===_0xa973e7)return _0x35104a;return _0xa973e7;}['lodash_set'](_0x5ce0b2,_0x3802ba,_0x3a088c){return Object(_0x5ce0b2)!==_0x5ce0b2?_0x5ce0b2:(Array['isArray'](_0x3802ba)||(_0x3802ba=_0x3802ba['toString']()['match'](/[^.[\]]+/g)||[]),_0x3802ba['slice'](0x0,-0x1)['reduce']((_0x3587b6,_0x143678,_0x3dffe5)=>Object(_0x3587b6[_0x143678])===_0x3587b6[_0x143678]?_0x3587b6[_0x143678]:_0x3587b6[_0x143678]=Math['abs'](_0x3802ba[_0x3dffe5+0x1])>>0x0==+_0x3802ba[_0x3dffe5+0x1]?[]:{},_0x5ce0b2)[_0x3802ba[_0x3802ba['length']-0x1]]=_0x3a088c,_0x5ce0b2);}['getdata'](_0x447129){let _0x22f61e=this['getval'](_0x447129);if(/^@/['test'](_0x447129)){const [,_0x2d99f0,_0x42a305]=/^@(.*?)\.(.*?)$/['exec'](_0x447129),_0x500d31=_0x2d99f0?this['getval'](_0x2d99f0):'';if(_0x500d31)try{const _0x15caaa=JSON['parse'](_0x500d31);_0x22f61e=_0x15caaa?this['lodash_get'](_0x15caaa,_0x42a305,''):_0x22f61e;}catch(_0x3aaf62){_0x22f61e='';}}return _0x22f61e;}['setdata'](_0x3575ce,_0x327be9){let _0x3c88f6=!0x1;if(/^@/['test'](_0x327be9)){const [,_0x53b67d,_0x4fa337]=/^@(.*?)\.(.*?)$/['exec'](_0x327be9),_0x2d2c53=this['getval'](_0x53b67d),_0x566b09=_0x53b67d?'null'===_0x2d2c53?null:_0x2d2c53||'{}':'{}';try{const _0x361a9a=JSON['parse'](_0x566b09);this['lodash_set'](_0x361a9a,_0x4fa337,_0x3575ce),_0x3c88f6=this['setval'](JSON['stringify'](_0x361a9a),_0x53b67d);}catch(_0x528034){const _0x181e77={};this['lodash_set'](_0x181e77,_0x4fa337,_0x3575ce),_0x3c88f6=this['setval'](JSON['stringify'](_0x181e77),_0x53b67d);}}else _0x3c88f6=this['setval'](_0x3575ce,_0x327be9);return _0x3c88f6;}['getval'](_0x4682ae){return this['isSurge']()||this['isLoon']()?$persistentStore['read'](_0x4682ae):this['isQuanX']()?$prefs['valueForKey'](_0x4682ae):this['isNode']()?(this['data']=this['loaddata'](),this['data'][_0x4682ae]):this['data']&&this['data'][_0x4682ae]||null;}['setval'](_0xd7b932,_0x37c05b){return this['isSurge']()||this['isLoon']()?$persistentStore['write'](_0xd7b932,_0x37c05b):this['isQuanX']()?$prefs['setValueForKey'](_0xd7b932,_0x37c05b):this['isNode']()?(this['data']=this['loaddata'](),this['data'][_0x37c05b]=_0xd7b932,this['writedata'](),!0x0):this['data']&&this['data'][_0x37c05b]||null;}['initGotEnv'](_0x921fbb){this['got']=this['got']?this['got']:require('got'),this['cktough']=this['cktough']?this['cktough']:require('tough-cookie'),this['ckjar']=this['ckjar']?this['ckjar']:new this['cktough']['CookieJar'](),_0x921fbb&&(_0x921fbb['headers']=_0x921fbb['headers']?_0x921fbb['headers']:{},void 0x0===_0x921fbb['headers']['Cookie']&&void 0x0===_0x921fbb['cookieJar']&&(_0x921fbb['cookieJar']=this['ckjar']));}['get'](_0x5c4a00,_0x35a8fd=()=>{}){_0x5c4a00['headers']&&(delete _0x5c4a00['headers']['Content-Type'],delete _0x5c4a00['headers']['Content-Length']),this['isSurge']()||this['isLoon']()?(this['isSurge']()&&this['isNeedRewrite']&&(_0x5c4a00['headers']=_0x5c4a00['headers']||{},Object['assign'](_0x5c4a00['headers'],{'X-Surge-Skip-Scripting':!0x1})),$httpClient['get'](_0x5c4a00,(_0x4aae8b,_0x506be8,_0xa297d6)=>{!_0x4aae8b&&_0x506be8&&(_0x506be8['body']=_0xa297d6,_0x506be8['statusCode']=_0x506be8['status']),_0x35a8fd(_0x4aae8b,_0x506be8,_0xa297d6);})):this['isQuanX']()?(this['isNeedRewrite']&&(_0x5c4a00['opts']=_0x5c4a00['opts']||{},Object['assign'](_0x5c4a00['opts'],{'hints':!0x1})),$task['fetch'](_0x5c4a00)['then'](_0xcaeae0=>{const {statusCode:_0x422690,statusCode:_0xc1ddf3,headers:_0x3d03fc,body:_0x1ffa53}=_0xcaeae0;_0x35a8fd(null,{'status':_0x422690,'statusCode':_0xc1ddf3,'headers':_0x3d03fc,'body':_0x1ffa53},_0x1ffa53);},_0xa31ff3=>_0x35a8fd(_0xa31ff3))):this['isNode']()&&(this['initGotEnv'](_0x5c4a00),this['got'](_0x5c4a00)['on']('redirect',(_0x50de7f,_0x3833e8)=>{try{if(_0x50de7f['headers']['set-cookie']){const _0x3e7427=_0x50de7f['headers']['set-cookie']['map'](this['cktough']['Cookie']['parse'])['toString']();_0x3e7427&&this['ckjar']['setCookieSync'](_0x3e7427,null),_0x3833e8['cookieJar']=this['ckjar'];}}catch(_0x94f438){this['logErr'](_0x94f438);}})['then'](_0x3baf82=>{const {statusCode:_0x49201a,statusCode:_0x768c16,headers:_0x363364,body:_0xa76d76}=_0x3baf82;_0x35a8fd(null,{'status':_0x49201a,'statusCode':_0x768c16,'headers':_0x363364,'body':_0xa76d76},_0xa76d76);},_0x2efde3=>{const {message:_0x15daa3,response:_0x38742a}=_0x2efde3;_0x35a8fd(_0x15daa3,_0x38742a,_0x38742a&&_0x38742a['body']);}));}['post'](_0x4076bc,_0x469cee=()=>{}){if(_0x4076bc['body']&&_0x4076bc['headers']&&!_0x4076bc['headers']['Content-Type']&&(_0x4076bc['headers']['Content-Type']='application/x-www-form-urlencoded'),_0x4076bc['headers']&&delete _0x4076bc['headers']['Content-Length'],this['isSurge']()||this['isLoon']())this['isSurge']()&&this['isNeedRewrite']&&(_0x4076bc['headers']=_0x4076bc['headers']||{},Object['assign'](_0x4076bc['headers'],{'X-Surge-Skip-Scripting':!0x1})),$httpClient['post'](_0x4076bc,(_0xd8ed52,_0x50a883,_0x4980bf)=>{!_0xd8ed52&&_0x50a883&&(_0x50a883['body']=_0x4980bf,_0x50a883['statusCode']=_0x50a883['status']),_0x469cee(_0xd8ed52,_0x50a883,_0x4980bf);});else if(this['isQuanX']())_0x4076bc['method']='POST',this['isNeedRewrite']&&(_0x4076bc['opts']=_0x4076bc['opts']||{},Object['assign'](_0x4076bc['opts'],{'hints':!0x1})),$task['fetch'](_0x4076bc)['then'](_0x2567cc=>{const {statusCode:_0x3b3d5d,statusCode:_0x1b0140,headers:_0x206c9d,body:_0x56b214}=_0x2567cc;_0x469cee(null,{'status':_0x3b3d5d,'statusCode':_0x1b0140,'headers':_0x206c9d,'body':_0x56b214},_0x56b214);},_0x3932de=>_0x469cee(_0x3932de));else if(this['isNode']()){this['initGotEnv'](_0x4076bc);const {url:_0x1b4258,..._0x124214}=_0x4076bc;this['got']['post'](_0x1b4258,_0x124214)['then'](_0x120871=>{const {statusCode:_0x1327c8,statusCode:_0x918107,headers:_0x10d55a,body:_0x273a5d}=_0x120871;_0x469cee(null,{'status':_0x1327c8,'statusCode':_0x918107,'headers':_0x10d55a,'body':_0x273a5d},_0x273a5d);},_0x3bd94e=>{const {message:_0x1f8723,response:_0x2332f6}=_0x3bd94e;_0x469cee(_0x1f8723,_0x2332f6,_0x2332f6&&_0x2332f6['body']);});}}['time'](_0x22feb2,_0x315d66=null){const _0x57133a=_0x315d66?new Date(_0x315d66):new Date();let _0x509f87={'M+':_0x57133a['getMonth']()+0x1,'d+':_0x57133a['getDate'](),'H+':_0x57133a['getHours'](),'m+':_0x57133a['getMinutes'](),'s+':_0x57133a['getSeconds'](),'q+':Math['floor']((_0x57133a['getMonth']()+0x3)/0x3),'S':_0x57133a['getMilliseconds']()};/(y+)/['test'](_0x22feb2)&&(_0x22feb2=_0x22feb2['replace'](RegExp['$1'],(_0x57133a['getFullYear']()+'')['substr'](0x4-RegExp['$1']['length'])));for(let _0x14609b in _0x509f87)new RegExp('('+_0x14609b+')')['test'](_0x22feb2)&&(_0x22feb2=_0x22feb2['replace'](RegExp['$1'],0x1==RegExp['$1']['length']?_0x509f87[_0x14609b]:('00'+_0x509f87[_0x14609b])['substr']((''+_0x509f87[_0x14609b])['length'])));return _0x22feb2;}['msg'](_0x38a8fe=_0x293ecd,_0x56717d='',_0x3f0952='',_0x3b52ff){const _0x538bfe=_0x92280=>{if(!_0x92280)return _0x92280;if('string'==typeof _0x92280)return this['isLoon']()?_0x92280:this['isQuanX']()?{'open-url':_0x92280}:this['isSurge']()?{'url':_0x92280}:void 0x0;if('object'==typeof _0x92280){if(this['isLoon']()){let _0x2bcce5=_0x92280['openUrl']||_0x92280['url']||_0x92280['open-url'],_0x1ff426=_0x92280['mediaUrl']||_0x92280['media-url'];return{'openUrl':_0x2bcce5,'mediaUrl':_0x1ff426};}if(this['isQuanX']()){let _0x74cffa=_0x92280['open-url']||_0x92280['url']||_0x92280['openUrl'],_0x533f2f=_0x92280['media-url']||_0x92280['mediaUrl'];return{'open-url':_0x74cffa,'media-url':_0x533f2f};}if(this['isSurge']()){let _0x15bf18=_0x92280['url']||_0x92280['openUrl']||_0x92280['open-url'];return{'url':_0x15bf18};}}};if(this['isMute']||(this['isSurge']()||this['isLoon']()?$notification['post'](_0x38a8fe,_0x56717d,_0x3f0952,_0x538bfe(_0x3b52ff)):this['isQuanX']()&&$notify(_0x38a8fe,_0x56717d,_0x3f0952,_0x538bfe(_0x3b52ff))),!this['isMuteLog']){let _0x429198=['','==============📣系统通知📣=============='];_0x429198['push'](_0x38a8fe),_0x56717d&&_0x429198['push'](_0x56717d),_0x3f0952&&_0x429198['push'](_0x3f0952),console['log'](_0x429198['join']('\x0a')),this['logs']=this['logs']['concat'](_0x429198);}}['log'](..._0xc1cde6){_0xc1cde6['length']>0x0&&(this['logs']=[...this['logs'],..._0xc1cde6]),console['log'](_0xc1cde6['join'](this['logSeparator']));}['logErr'](_0x48ee27,_0x359d8f){const _0x4495b2=!this['isSurge']()&&!this['isQuanX']()&&!this['isLoon']();_0x4495b2?this['log']('','❗️'+this['name']+',\x20错误!',_0x48ee27['stack']):this['log']('','❗️'+this['name']+',\x20错误!',_0x48ee27);}['wait'](_0xd4b951){return new Promise(_0x21085f=>setTimeout(_0x21085f,_0xd4b951));}['done'](_0x5e08bb={}){const _0x38167e=new Date()['getTime'](),_0x5626a4=(_0x38167e-this['startTime'])/0x3e8;this['log']('','🔔'+this['name']+',\x20结束!\x20🕛\x20'+_0x5626a4+'\x20秒'),this['log'](),(this['isSurge']()||this['isQuanX']()||this['isLoon']())&&$done(_0x5e08bb);}}(_0x293ecd,_0x39e6c3);}

